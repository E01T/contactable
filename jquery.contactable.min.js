/*
 * contactable 1.5 - jQuery Ajax contact form
 *
 * Copyright (c) 2009 Philip Beel (http://www.theodin.co.uk/)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) 
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Revision: $Id: jquery.contactable.min.js 2012-05-26 $
 *
 */

(function(e){e.fn.contactable=function(t){var n={url:"mail.php",name:"Name",email:"Email",dropdownTitle:"",dropdownOptions:["General","Website bug","Feature request"],message:"Message",subject:"A contactable message",submit:"SEND",recievedMsg:"Thank you for your message",notRecievedMsg:"Sorry but your message could not be sent, try again later",disclaimer:"Please feel free to get in touch, we value your feedback",hideOnSubmit:true};var t=e.extend(n,t);return this.each(function(){function o(){e(".contactable-holder").hide();e("#contactable-loading").show();e.ajax({type:"POST",url:t.url,data:{subject:t.subject,name:e("#contactable-name").val(),email:e("#contactable-email").val(),issue:e("#contactable-dropdown").val(),message:e("#contactable-message").val()},success:function(n){e("#contactable-loading").css({display:"none"});if(n.response==="success"){e("#contactable-callback").show().append(t.recievedMsg);if(t.hideOnSubmit===true){e("#contactable-contactForm").animate({dummy:1},2e3).animate({marginLeft:"-=450px"},"slow");e("#contactable-inner").animate({dummy:1},2e3).animate({marginLeft:"-=447px"},"slow").animate({marginLeft:"+=5px"},"fast");e("#contactable-overlay").css({display:"none"})}}else{e("#contactable-callback").show().append(t.notRecievedMsg);setTimeout(function(){e(".contactable-holder").show();e("#contactable-callback").hide().html("")},2e3)}},error:function(n){e("#contactable-loading").css({display:"none"});e("#contactable-callback").show().append(t.notRecievedMsg)}})}var n="",r=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,i=t.dropdownOptions.length,s;if(t.dropdownTitle){n+='<p><label for="contactable-dropdown">'+t.dropdownTitle+' </label><br /><select name="dropdown" id="contactable-dropdown" class="contactable-dropdown">';for(s=0;s<i;s++){n+='<option value="'+t.dropdownOptions[s]+'">'+t.dropdownOptions[s]+"</option>"}n+="</select></p>"}e(this).html('<div id="contactable-inner"></div><form id="contactable-contactForm" method="" action=""><div id="contactable-loading"></div><div id="contactable-callback"></div><div class="contactable-holder"><p><label for="contactable-name">'+t.name+'<span class="contactable-green"> * </span></label><br /><input id="contactable-name" class="contactable-contact contactable-validate" name="name" /></p><p><label for="contactable-email">'+t.email+' <span class="contactable-green"> * </span></label><br /><input id="contactable-email" class="contactable-contact contactable-validate" name="email" /></p>'+n+'<p><label for="contactable-message">'+t.message+' <span class="contactable-green"> * </span></label><br /><textarea id="contactable-message" name="message" class="contactable-message contactable-validate" rows="4" cols="30" ></textarea></p><p><input class="contactable-submit" type="submit" value="'+t.submit+'"/></p><p class="contactable-disclaimer">'+t.disclaimer+"</p></div></form>");$.fn.toggleClick=function(){var e=arguments,t=0;return this.click(function(){e[t].apply(this,arguments);t=(t+1)%e.length})};e("#contactable-inner").toggleClick(function(){e("#contactable-overlay").css({display:"block"});e(this).animate({marginLeft:"-=5px"},"2000");e("#contactable-contactForm").animate({marginLeft:"-=0px"},"2000");e(this).animate({marginLeft:"+=387px"},"4000");e("#contactable-contactForm").animate({marginLeft:"+=390px"},"4000")},function(){e("#contactable-contactForm").animate({marginLeft:"-=390px"},"4000");e(this).animate({marginLeft:"-=387px"},"4000").animate({marginLeft:"+=5px"},"2000");e("#contactable-overlay").css({display:"none"})});e("#contactable-contactForm").submit(function(){var t=true,n;e("#contactable-contactForm .contactable-validate").each(function(){e(this).removeClass("contactable-invalid")});e("#contactable-contactForm .contactable-validate").each(function(){if(e(this).val().length<2){e(this).addClass("contactable-invalid");t=false}if(!r.test(e("#contactable-contactForm #contactable-email").val())){e("#contactable-contactForm #contactable-email").addClass("contactable-invalid");t=false}});if(t===true){o()}return false})})}})(jQuery)